
@{
    ViewBag.Title = "TaskDetails";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
@model IList<TaskManager.Core.Entities.TaskDetailEntity>
@helper GetTrClassByEnabled(bool enabled)
{
    if (!enabled)
    {
        @("warning")
    }
}
@if (Model != null && Model.Any())
{

    <table class="table table-hover">
        <thead>
        <tr>
            <th>名称</th>
            <th>任务类</th>
            <th>Quartz规则</th>
            <th>当前状态</th>
            <th>上次开始时间</th>
            <th>上次结束时间</th>
            <th>上次执行结果</th>
            <th>下次开始时间</th>
            <th>有效时间</th>
            <th>是否启用</th>
            <th>操作</th>
        </tr>
        </thead>
        <tbody>
        @foreach (var taskDetail in Model)
        {
            <tr class="@GetTrClassByEnabled(taskDetail.Enabled)">
                <td>@taskDetail.Name</td>
                <td>@taskDetail.ClassType</td>
                <td>@taskDetail.TaskRule</td>
                <td>@taskDetail.IsRunning</td>
                <td>@taskDetail.LastStart</td>
                <td>@taskDetail.LastEnd</td>
                <td>@taskDetail.LastIsSuccess</td>
                
                <td>@taskDetail.NextStart</td>
                <td>@(string.Format("{0}至{1}",taskDetail.StartDate.ToString("yyyy-M-d"),taskDetail.EndDate.HasValue?taskDetail.EndDate.Value.ToString("yyyy-M-d"):"永久"))</td>
                <td>@taskDetail.Enabled</td>
                <td><a>编辑</a>|<a>详情</a>|<a>删除</a>|<a>启用</a>|<a>执行</a></td>
            </tr>
        }
        </tbody>
    </table>

}